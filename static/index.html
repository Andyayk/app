{% extends "layout.html" %}
{% block content %}
<!-- Masthead -->
<header class="masthead text-white text-center">
<div class="overlay"></div>
<div class="container">
  <div class="row">
	<div class="col-xl-9 mx-auto">
	  <h1 class="mb-5">HR Policies Graph Based Search</h1>
	</div>
	<div class="col-md-10 col-lg-8 col-xl-7 mx-auto">
	  <form 
	  id="searchbar"
	  v-on:submit.prevent="fetchData"
	  >
		<div class="form-row">
		  <div class="col-12 col-md-9 mb-2 mb-md-0">
			<input name="query" v-model="query" class="form-control form-control-lg" placeholder="Enter your query">
		  </div>
		  <div class="col-12 col-md-3">
			<button type="submit" class="btn btn-block btn-lg btn-primary">Search!</button>
		  </div>
		</div>
	  </form>
	</div>
  </div>
</div>
</header>
{% endblock %}

{% block scripts %}
	<script src="https://cdn.jsdelivr.net/npm/vue-resource@1.5.1"></script>
	<script>
		var myObject = new Vue({
			el: '#app', //element name
			delimiters: ['[[', ']]'], //to prevent syntax error with jinja
			data: {
				band: {}
			},
			mounted: function () {
				this.fetchData();
			},
			methods: {
				fetchData: function() {
					this.$http.get('/test').then(response => {
						this.band = response.body;
					}, response => {
						//error callback
						console.log("error occurred");
					});
				}
			}
		})

		var searchbar = new Vue({
			el: '#searchbar',
			delimiters: ['[[', ']]'], //to prevent syntax error with jinja
			data: {query: 'hello!'},	
			// define methods under the `methods` object
			methods: {
				fetchData: function() {
					this.$http.post('/test2', {query: this.query}).then(function(response) {
						console.log("Success:")
						console.log(response.data)
					}, function(response) {
						//error callback
						console.log(response.data)
					});
				}
			}
		})

		var myObject3 = new Vue({
			el: '#app3',
			delimiters: ['[[', ']]'], //to prevent syntax error with jinja
			data: {
				todos: [
				{text: 'Annual leaves'},
				{text: 'Retirement policy'},
				{text: 'Acting allowances'}
				]
			}
		})

		Vue.component('todo-item', {
		  props: ['todo'],
		  delimiters: ['[[', ']]'], //to prevent syntax error with jinja
		  template: '<li>[[ todo.text ]]</li>'
		})	
		
		var app7 = new Vue({
			el: '#app-7',
			delimiters: ['[[', ']]'], //to prevent syntax error with jinja
			data: {
				groceryList: [
				{id: 0, text: 'Vegetables'},
				{id: 1, text: 'Cheese'},
				{id: 2, text: 'Milk'}
				]
			}
		})	
	</script>
{% endblock %}